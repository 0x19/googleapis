syntax = "proto3";

package google.cloud.vision.v1;

import "google/api/annotations.proto";

option java_multiple_files = true;
option java_package = "com.google.cloud.vision.v1";
option java_outer_classname = "WebAnnotationProto";
option cc_enable_arenas = true;

// Relevant information for the image from the Internet.
message WebAnnotation {
  option (google.api.message_visibility).restriction = "TRUSTED_TESTER";

  // Deduced entities from similar images on the Internet.
  repeated WebEntity web_entities = 1;

  // Fully matching images from the Internet.
  // They're definite neardups and most often a copy of the query image with
  // merely a size change.
  repeated WebImage full_matching_images = 2;

  // Partial matching images from the Internet.
  // Those images are similar enough to share some key-point features. For
  // example an original image will likely have partial matching for its crops.
  repeated WebImage partial_matching_images = 3;

  // Web pages containing the matching images from the Internet.
  repeated WebPage pages_with_matching_images = 4;

  // Entity deduced from similar images on the Internet.
  message WebEntity {
    option (google.api.message_visibility).restriction = "TRUSTED_TESTER";

    // Opaque entity ID.
    // (-- Internal comments below --)
    // (-- All the entities are from KG but currently the KG API only        --)
    // (-- exposes a subset of them. There is an ongoing effort to expose    --)
    // (-- more/all entities. Regardless entity_id is still useful for now   --)
    // (-- to uniquely identify an entity especially when i18n is involved.  --)
    string entity_id = 1;

    // Overall relevancy score for the entity.
    // Not normalized and not comparable across different image queries.
    float score = 2;

    // Canonical description of the entity, in English.
    string description = 3;
  }

  // Metadata for online images.
  message WebImage {
    option (google.api.message_visibility).restriction = "TRUSTED_TESTER";

    // The result image URL.
    string url = 1;

    // Overall relevancy score for the image.
    // Not normalized and not comparable across different image queries.
    float score = 2;
  }

  // Metadata for web pages.
  message WebPage {
    option (google.api.message_visibility).restriction = "TRUSTED_TESTER";

    // The result web page URL.
    string url = 1;

    // Overall relevancy score for the web page.
    // Not normalized and not comparable across different image queries.
    float score = 2;
  }
}